{% load static %}

{% for review in reviews %}
    {% if review.review is not None %}
        <div class="review-card">
            <div class="review-header">
                <div class="profile-photo">
                    {% if review.user.image %}
                        <img src="{{ review.user.image.url }}" alt="{{ review.username }}">
                    {% else %}
                        <div class="profile-photo-placeholder"></div>
                    {% endif %}
                </div>
                <span class="username">{{ review.user.username }}</span>
                <span class="date">{{ review.added_at|date:"d.m.Y H:i" }}</span>
            </div>
            <div class="review-rating">
                <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ –≤ –≤–∏–¥–µ –∑–≤–µ–∑–¥ -->
                <div class="star-rating">
                    {% for i in "54321" %}
                        {% if i|add:0 <= review.mark %}
                            <span class="star filled">‚òÖ</span>
                        {% else %}
                            <span class="star">‚òÜ</span>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div class="review-text">
                <p>{{ review.review }}</p>
            </div>
            <div class="review-control">
                {% if review.user.username == current_username %}
                    <a href="{% url "reviews:delete_review" %}" class="btn-edit-review remove-review" data-movie-id="{{ review.movie.id }}">
                        {% csrf_token %}
                        ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å
                    </a>
                    <a class="btn-delete-review" data-review-id="{{ review.movie.id }}">
                        {% csrf_token %}
                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                    </a>
                {% endif %}
            </div>
        </div>
    {% endif %}
{% endfor %}

<div class="pagination">
    <span class="step-links">
        
            <a href="?page=1">&laquo; –ü–µ—Ä–≤–∞—è</a>
            <a href="{% if reviews.has_previous %}?page={{ reviews.previous_page_number }}{% else %}#{% endif %}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>

        <span class="current">
            –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ reviews.number }} –∏–∑ {{ reviews.paginator.num_pages }}
        </span>

            <a href="{% if reviews.has_next %}?page={{ reviews.next_page_number }}{% else %}#{% endif %}">–°–ª–µ–¥—É—é—â–∞—è</a>
            <a href="?page={{ reviews.paginator.num_pages }}">–ü–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
    </span>
</div>